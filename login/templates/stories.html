{% extends "base.html" %}
{% block title %}- Sources List{% endblock %}

{% block content %}
<br>

<section id="main" class="wrapper">
    <div class="inner">
        <div style="float: right; ">
            <form class="alt" method="get" action="/search_stories/">
                       <nobr>
                           <input type="text" id="searchBox" class="small" name="q" placeholder="Search">
                           <input type="submit" class="button small--table" value="Search" >
                       </nobr>

            </form>
        </div>
        <br>
         <div class="content">
           <div align="center">
             <section class="container">
                 <div style="float: right">
                     Stories Count : {{ data|length }} <br>

                 </div>
                 {% if data %}
                        <table class="table-no-change" >
                            <tr>
                                <th>
                                    Title
                                </th>

                                <th >
                                    Body
                                </th>


                                <th >
                                    Published on
                                </th>


                                <th>
                                    Source
                                </th>
                                <th>    </th>
                                <th colspan="2">
                                   Action
                                </th>
                            </tr>

                            {% for value in data %}
                                <tr>
                                    <td width="15%">
                                        <label>
                                            <a href="{{ value.url }}" target="_blank" >{{ value.title|truncatewords:'9' }}</a>
                                        </label>
                                    </td>

                                    <td>
                                            {{ value.body_text|truncatewords:'30'}}
                                    </td>
                                    <td>
                                            {{ value.pub_date }}
                                    </td>

                                     <td>
                                            <a href="{{ value.source.rss_url }}" target="_blank" >{{ value.source.name }}</a>
                                    </td>
                                    <td> </td>
                                    <td>
                                        <form class="alt" action="/edit_story/" method="get">
                                               <input class="button small--table" type="hidden" name="item_id" value="{{value.id}}" />
                                               <input class="button small--table" type="submit" value=" &nbsp;&nbsp;Edit&nbsp;&nbsp; ">
                                        </form>

                                        <form class="alt" action="/remove_story/" method="get" onsubmit="return confirm('Do you really want to Delete');">
                                               <input class="button small--table" type="hidden" name="item_id" value="{{value.id}}" />
                                               <input class="button small--table"  type="submit" value="Delete">
                                        </form>
                                    </td>
                                </tr>
                            {% endfor %}
                        </table>
                 {% else %}
                            <p> There are no Stories.</p>
                 {% endif %}
             </section>
           </div>
           <br>
        </div>
    </div>
</section>
{% endblock %}